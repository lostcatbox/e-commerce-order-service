# Cache (캐시)
- 데이터를 임시로 복사해두는 Storage 계층
- 적은 부하로 API 응답을 빠르게 처리하기 위해 캐시를 사용

## 캐시 종류
- **애플리케이션(application level)**에서 직접 ehcache 등을 사용하는 방법
  - 장점 : 세팅 및 관리가 간편함
  - 단점 : 분산 환경에서는 캐시의 데이터 불일치 = 요청별로 응답 데이터의 차이가 발생할 수 있음
- **외부 캐시 서버(external level)**에서 Redis, Memcached 등을 사용하는 방법
  - 장점 : 분산 환경에서 여러 인스턴스가 동일한 캐시 데이터를 사용하므로 데이터 일관성 유지 가능
  - 단점 : 별도의 네트워크 비용 발생, 캐시 서버 관리 필요

## 애플리케이션 내부 캐시 특징
- `신속성` - 인스턴스의 메모리에 캐시 데이터를 저장하므로 속도가 가장 빠름
- `저비용` - 인스턴스의 메모리에 캐시 데이터를 저장하므로 별도의 네트워크 비용이 발생하지 않음
- `휘발성` - 애플리케이션이 종료될 때, 캐시 데이터는 삭제됨
- `메모리 부족` - 활성화된 애플리케이션 인스턴스에 데이터를 올려 캐싱하는 방법이므로 메모리 부족으로 인해 비정상 종료로 이어질 수 있음
- `분산 환경 문제` - 분산 환경에서 서로 다른 서버 인스턴스 간에 데이터 불일치 문제가 발생할 수 있음

## 외부 캐시 서버 특징
- `일관성` - 별도의 담당 서비스를 둠으로서 분산 환경 ( Multi - Instance ) 에서도 동일한 캐시 기능을 제공할 수 있음
- `안정성` - 외부 캐시 서비스의 Disk 에 스냅샷을 저장하여 장애 발생 시 복구가 용이함
- `고가용성` - 각 인스턴스에 의존하지 않으므로 분산 환경을 위한 HA 구성이 용이함
- `고비용` - 네트워크 통신을 통해 외부의 캐시 서비스와 소통해야 하므로 네트워크 비용 또한 고려해야 함

## 캐시 전략
- `Read-Through` - 캐시에서 데이터를 조회하고, 없으면 DB에서 조회 후 캐시에 저장
- `Write-Through` - 캐시에 데이터를 쓰고, 동시에 DB에도 저장
- `Write-Back` - 캐시에 데이터를 쓰고, 일정 시간 후에 DB에 저장

## 캐시 정책
- `Expiration`  - 캐시 데이터의 유효 기간 설정
  - `TTL(Time To Live)` - 캐시 데이터의 유효 기간 설정
- `Eviction` - 캐시가 가득 찼을 때, 어떤 데이터를 삭제할지 결정하는 정책
  - `LRU(Least Recently Used)` - 가장 오랫동안 사용되지 않은 데이터를 삭제
  - `LFU(Least Frequently Used)` - 가장 적게 사용된 데이터를 삭제
  - `FIFO(First In First Out)` - 가장 먼저 들어온 데이터를 삭제
